{% extends "private.html" %}

{% block title %}
    Категории:
{% endblock %}

{% block article %}
    <div class="cat-menu">
<!--        <a class="cat-btn grey-btn" href="{{ url_for('list_categories', active_only='true', show_children=show_children|string) }}">Только активные</a>-->
<!--        <a class="cat-btn grey-btn" href="{{ url_for('list_categories', active_only='false', show_children=show_children|string) }}">Все</a>-->
<!--        <a class="cat-btn grey-btn" href="{{ url_for('list_categories', show_children='true', active_only=active_only|string) }}">С подкатегориями</a>-->
        <button class="cat-btn grey-btn" type="button" onclick="overlayMenu.showModal()">Добавить</button>
    </div>

    <ul>
    {% for cat in categories %}
        <li style="margin-left: {{ cat._level * 20 }}px;">  <!-- Отступ для дерева -->
            {{ cat.name }} ({{ 'Активна' if cat.active else 'Неактивна' }})
            {% if cat.description %}<br><small>{{ cat.description }}</small>{% endif %}
            {% if cat.parent %}(Родитель: {{ cat.parent.name }}){% endif %}
            {% if cat.children %}(Дети: {{ cat.children|length }}){% endif %}
        </li>
    {% endfor %}
    </ul>


{% endblock %}

    {% block modal %}

          <h3>Добавление категории</h3>
          <form id="form-category" class="form-login" action="" method="post" novalidate>
            {{ form.hidden_tag() }}
            <p class="form-login--field">
              {{ form.name.label }}<span style="color: red;">*</span>
              {{ form.name(size=32) }}
              {% for error in form.name.errors %}
                <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
            </p>
            <p class="form-login--field">
              {{ form.description.label }}<span style="color: red;">*</span>
              {{ form.description(rows=5) }}
              {% for error in form.description.errors %}
                <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
            </p>
            <p class="form-login--field">
              {{ form.parent.label }}<span style="color: red;">*</span>
              {{ form.parent() }}
              {% for error in form.parent.errors %}
                <span style="color: red;">[{{ error }}]</span>
              {% endfor %}
            </p>
            <p class="form-login--submit">{{ form.submit_new() }}</p>
          </form>

    {% endblock %}


